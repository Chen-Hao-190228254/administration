<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.skm.exa.persistence.dao.UserManagementDao">
    <sql id="dtoManagementColumns">
        `id`,
        `account_number`,
        `password`,
        `name`,
        `photo_id`,
        `card`,
        `card_photo_front_id`,
        `card_photo_reverse_id`,
        `phone`,
        `native_place`,
        `email`,
        `qq`,
        `skill`,
        `report_dt`,
        `leave_dt`,
        `status`,
        `entry_id`,
        `entry_name`,
        `entry_dt`,
        `update_id`,
        `update_name`,
        `update_dt`
    </sql>
    <!--extends 扩展，延伸-->
    <resultMap id="DTORM" type="com.skm.exa.persistence.dto.UserManagementDto" extends="RM">
    </resultMap>

    <!--分页查询-->
    <select id="getManagementDtoPage" resultMap="DTORM">
        SELECT
        <include refid="dtoManagementColumns"/>
        FROM `administration_users_management`
        <where>
            <if test="id != null">OR`id` = #{id, jdbcType=BIGINT}</if>
            <if test="@com.skm.exa.mybatis.Ognl@isNotEmpty(nameLike)">OR `name` LIKE "%"#{nameLike, jdbcType=VARCHAR}"%"</if>
            <if test="@com.skm.exa.mybatis.Ognl@isNotEmpty(cardLike)">OR `card` LIKE "%"#{cardLike, jdbcType=VARCHAR}"%"</if>
            <if test="@com.skm.exa.mybatis.Ognl@isNotEmpty(phoneLike)">OR `phone` LIKE "%"#{phoneLike, jdbcType=VARCHAR}"%"</if>
            <if test="@com.skm.exa.mybatis.Ognl@isNotEmpty(nativePlaceLike)">OR `native_place` LIKE "%"#{nativePlaceLike, jdbcType=VARCHAR}"%"</if>
            <if test="@com.skm.exa.mybatis.Ognl@isNotEmpty(emailLike)">OR `email` LIKE "%"#{emailLike, jdbcType=VARCHAR}"%"</if>
            <if test="@com.skm.exa.mybatis.Ognl@isNotEmpty(qqLike)">OR `qq` LIKE "%"#{qqLike, jdbcType=VARCHAR}"%"</if>
            <if test="@com.skm.exa.mybatis.Ognl@isNotEmpty(skillLike)">OR `skill` LIKE "%"#{skillLike, jdbcType=VARCHAR}"%"</if>
            <if test="@com.skm.exa.mybatis.Ognl@isNotEmpty(accountNumberLike)">OR `account_number` LIKE "%"#{accountNumberLike, jdbcType=VARCHAR}"%"</if>
        </where>
    </select>
</mapper>